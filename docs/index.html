<!DOCTYPE html>
<html lang="en">
  <head>
    <title>  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
           Docs
        </a>
         (87% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/formbound/Futures">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html"> Reference</a>
      <img class="carat" src="img/carat.png" />
        Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Future.html">Future</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/FutureObserver.html">FutureObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Promise.html">Promise</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/FutureValue.html">FutureValue</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/DispatchQueue.html">DispatchQueue</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:7Futures7promiseAA6FutureCyxGxm_So13DispatchQueueC2onyyAA0C5ValueOyxGcKctlF">promise(_:on:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:7Futures7promiseAA6FutureCyxGSo13DispatchQueueC2on_xyKctlF">promise(on:_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/AnyFuture.html">AnyFuture</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/AnyFutureObserver.html">AnyFutureObserver</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <h1 id='futures' class='heading'>Futures</h1>

<p><a href="https://circleci.com/gh/formbound/Futures"><img src="https://circleci.com/gh/formbound/Futures.svg?style=svg" alt="CircleCI"></a></p>

<p>Futures is a cross-platform framework for simplifying asynchronous programming, written in Swift. It&rsquo;s lightweight and easy to understand.</p>
<h3 id='supported-platforms' class='heading'>Supported Platforms</h3>

<p>Futures supports all platforms where Swift is supported.</p>

<ul>
<li>Ubuntu 14.04</li>
<li>macOS 10.9</li>
<li>tvOS 9.0</li>
<li>iOS 8.0</li>
<li>watchOS 2.0</li>
</ul>
<h3 id='architecture' class='heading'>Architecture</h3>

<p>Fundamentally, Futures is a very simple framework, that consists of two types:</p>

<ul>
<li><code><a href="Classes/Promise.html">Promise</a></code>, a single assignment container producing a <code><a href="Classes/Future.html">Future</a></code></li>
<li><code><a href="Classes/Future.html">Future</a></code>, a read-only container resolving into either a value, or an error</li>
</ul>

<p>Unlike many promise frameworks, a promise is not distinguished from a future, which does not ensure immutability of a promise that gets passed around. This framework distinguishes a <code><a href="Classes/Promise.html">Promise</a></code> from a future in that a <code><a href="Classes/Future.html">Future</a></code> is the observable value while a <code><a href="Classes/Promise.html">Promise</a></code> is the function that sets the value.</p>

<p>Futures are resolved, by default, on a single serial queue. This queue can be modified by assigning a different queue to <code><a href="Extensions/DispatchQueue.html#/s:So13DispatchQueueC7FuturesE7futuresABvpZ">DispatchQueue.futures</a></code>. You can also specify a queue of your choice to each callback added to a future .</p>

<p>A future is regarded as:</p>

<ul>
<li><code>resolved</code>, if its value is set</li>
<li><code>fulfilled</code>, if the value is set, and successful</li>
<li><code>rejected</code>, if the value is set, and a failure (error)</li>
</ul>
<h2 id='documentation' class='heading'>Documentation</h2>

<p>The complete documentation can be found <a href="https://formbound.github.io/Futures/">here</a>.</p>
<h2 id='getting-started' class='heading'>Getting started</h2>

<p>Futures can be added to your project either using <a href="https://github.com/Carthage/Carthage">Carthage</a> or Swift package manager.</p>

<p>If you want to depend on Futures in your project, it&rsquo;s as simple as adding a <code>dependencies</code> clause to your <code>Package.swift</code>:</p>
<pre class="highlight swift"><code><span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/formbound/Futures.git"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"1.0.2"</span><span class="p">)</span>
<span class="p">]</span>
</code></pre>

<p>Or, add a dependency in your <code>Cartfile</code>:</p>
<pre class="highlight plaintext"><code>github "formbound/Futures"
</code></pre>

<p>More details on using Carthage can be found <a href="https://github.com/Carthage/Carthage#quick-start">here</a>.</p>

<p>Lastly, import the module in your Swift files</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">Futures</span>
</code></pre>
<h2 id='usage' class='heading'>Usage</h2>

<p>The simplest way to create a <code><a href="Classes/Future.html">Future</a></code> is to invoke the global <code>promise</code> function:</p>
<pre class="highlight swift"><code><span class="n">promise</span> <span class="p">{</span>
    <span class="s">"Hello world!"</span>
<span class="p">}</span>
</code></pre>

<p>You can also specify a queue on which to resolve the future:</p>
<pre class="highlight swift"><code><span class="nf">promise</span><span class="p">(</span><span class="nv">on</span><span class="p">:</span> <span class="o">.</span><span class="n">main</span><span class="p">)</span> <span class="p">{</span>
    <span class="s">"Hello world!"</span>
<span class="p">}</span>
</code></pre>

<p><strong>Note:</strong> default queue can be accessed, and modified via <code><a href="Extensions/DispatchQueue.html#/s:So13DispatchQueueC7FuturesE7futuresABvpZ">DispatchQueue.futures</a></code>.</p>

<p>A future that is resolved using a callback can also be created:</p>
<pre class="highlight swift"><code><span class="nf">promise</span><span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
    <span class="k">if</span> <span class="n">something</span> <span class="o">==</span> <span class="kc">true</span> <span class="p">{</span>
        <span class="nf">completion</span><span class="p">(</span><span class="o">.</span><span class="nf">fulfilled</span><span class="p">(</span><span class="s">"Hello World!"</span><span class="p">))</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">completion</span><span class="p">(</span><span class="o">.</span><span class="nf">rejected</span><span class="p">(</span><span class="k">throw</span> <span class="kt">SomethingError</span><span class="o">.</span><span class="n">notTrue</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='observing' class='heading'>Observing</h3>

<p>Multiple observers can be added to any future. Observing the value of a future can be done by calling:</p>

<ul>
<li><code>whenResolved</code>, if you&rsquo;re interested in both a value and a rejection error</li>
<li><code>whenFulfilled</code>, if you only care about the value</li>
<li><code>whenRejected</code>, if you only care about the error</li>
</ul>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">future</span> <span class="o">=</span> <span class="n">promise</span> <span class="p">{</span>
    <span class="k">try</span> <span class="nf">something</span><span class="p">()</span>
<span class="p">}</span>

<span class="n">future</span><span class="o">.</span><span class="n">whenFulfilled</span> <span class="p">{</span> <span class="n">value</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Fulfilled with"</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">future</span><span class="o">.</span><span class="n">whenRejected</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Rejected with"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">future</span><span class="o">.</span><span class="n">whenResolved</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">fulfilled</span><span class="p">(</span><span class="k">let</span> <span class="nv">value</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Fulfilled with"</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">rejected</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Rejected with"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='then' class='heading'>Then</h3>

<p>When the current <code><a href="Classes/Future.html">Future</a></code> is fulfilled, run the provided callback which returns a new <code><a href="Classes/Future.html">Future&lt;T&gt;</a></code>. This allows you to dispatch new asynchronous operations as steps in a sequence of operations. Note that, based on the result, you can decide what asynchronous work to perform next. This function is best used when you have other APIs returning <code><a href="Classes/Future.html">Future&lt;T&gt;</a></code>.</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">add</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="kt">Double</span><span class="p">,</span> <span class="n">to</span> <span class="nv">otherValue</span><span class="p">:</span> <span class="kt">Double</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Future</span><span class="o">&lt;</span><span class="kt">Double</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">promise</span> <span class="p">{</span>
        <span class="n">value</span> <span class="o">+</span> <span class="n">otherValue</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">promise</span> <span class="p">{</span>
    <span class="mi">10</span>
<span class="p">}</span><span class="o">.</span><span class="n">then</span> <span class="p">{</span> <span class="n">value</span> <span class="k">in</span>
    <span class="nf">add</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">to</span><span class="p">:</span> <span class="n">value</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>Call <code>thenIfRejected</code>  on a future to return another future, possibly recovering from the error that results in the rejection.</p>
<pre class="highlight swift"><code><span class="n">promise</span> <span class="p">{</span>
    <span class="k">try</span> <span class="nf">something</span><span class="p">()</span>
<span class="p">}</span><span class="o">.</span><span class="n">thenIfRejected</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
    <span class="k">return</span> <span class="k">try</span> <span class="nf">recover</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h3 id='map' class='heading'>Map</h3>

<p>When the current <code><a href="Classes/Future.html">Future</a></code> is fulfilled, run the provided callback that returns a new value of type <code>U</code>. This method is intended to provide a shorthand way of transforming fulfilled results of other futures. It is not intended to be used as <code>map</code> in the Swift standard library, however, that function may well be used inside the function provided to this method.</p>
<pre class="highlight swift"><code><span class="n">promise</span> <span class="p">{</span>
    <span class="p">[</span><span class="s">"Hello"</span><span class="p">,</span> <span class="s">"World!"</span><span class="p">]</span>
<span class="p">}</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">strings</span> <span class="k">in</span>
    <span class="n">strings</span><span class="o">.</span><span class="nf">joined</span><span class="p">(</span><span class="nv">separator</span><span class="p">:</span> <span class="s">" "</span><span class="p">)</span>
<span class="p">}</span><span class="o">.</span><span class="n">whenFulfilled</span> <span class="p">{</span> <span class="n">string</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="c1">// "Hello World!"</span>
<span class="p">}</span>
</code></pre>

<p>Like with <code>thenIfRejected</code> you can also call <code>mapIfRejected</code></p>
<h3 id='and' class='heading'>And</h3>

<p>Returns a new <code><a href="Classes/Future.html">Future</a></code>, that resolves when this <strong>and</strong> the provided future both are resolved. The returned future will provide the pair of values from this and the provided future. Note that the returned future will be rejected with the first error encountered.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">future1</span> <span class="o">=</span> <span class="n">promise</span> <span class="p">{</span>
    <span class="s">"Hello"</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">future2</span> <span class="o">=</span> <span class="n">promise</span> <span class="p">{</span>
    <span class="s">"World!"</span>
<span class="p">}</span>

<span class="n">future1</span><span class="o">.</span><span class="nf">and</span><span class="p">(</span><span class="n">future2</span><span class="p">)</span><span class="o">.</span><span class="n">whenFulfilled</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="nf">let</span> <span class="p">(</span><span class="n">hello</span><span class="p">,</span> <span class="n">world</span><span class="p">)</span> <span class="o">=</span> <span class="n">result</span> <span class="c1">// ("Hello", "World!")</span>
<span class="p">}</span>
</code></pre>
<h3 id='reduce' class='heading'>Reduce</h3>

<p>Returns a new <code><a href="Classes/Future.html">Future&lt;T&gt;</a></code> that fires only when all the provided <code><a href="Classes/Future.html">Future&lt;U&gt;</a></code>s have been resolved. The returned future carries the value of the <code>initialResult</code> provided, combined with the result of fulfilled <code><a href="Classes/Future.html">Future&lt;U&gt;</a></code>s using the provided <code>nextPartialResult</code> function. The returned <code><a href="Classes/Future.html">Future&lt;T&gt;</a></code> will be rejected as soon as either this, or a provided future is rejected. However, a failure will not occur until all preceding <code><a href="Classes/Future.html">Future</a></code>s have been resolved. As soon as a rejection is encountered, there subsequent futures will not be waited for, resulting in the fastest possible rejection for the provided futures.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">futures</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">...</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">value</span> <span class="k">in</span>
    <span class="n">promise</span> <span class="p">{</span> <span class="n">value</span> <span class="p">}</span>
<span class="p">}</span>

<span class="kt">Future</span><span class="o">&lt;</span><span class="kt">Int</span><span class="o">&gt;.</span><span class="nf">reduce</span><span class="p">(</span><span class="n">futures</span><span class="p">,</span> <span class="nv">initialResult</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="n">combined</span><span class="p">,</span> <span class="n">next</span> <span class="k">in</span>
    <span class="n">combined</span> <span class="o">+</span> <span class="n">next</span>
<span class="p">}</span><span class="o">.</span><span class="n">whenFulfilled</span> <span class="p">{</span> <span class="n">value</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="c1">// 55</span>
<span class="p">}</span>
</code></pre>

<p>For more in-depth documentation, visit the <a href="https://formbound.github.io/Futures/">docs</a>.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2018 <a class="link" href="" target="_blank" rel="external">Formbound</a>. All rights reserved. (Last updated: 2018-06-01)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
